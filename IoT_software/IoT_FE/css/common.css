/* ========== COMMON STYLES - TỐI ƯU ========== */
/* Styles chung tối ưu cho tất cả các trang */

/* --- Toàn trang - Tối ưu performance --- */
body { 
  background-color: #f4f6f9; 
  overflow: hidden; 
  transform: scale(0.9); 
  transform-origin: top left; 
  width: 111%; 
  height: 111%; 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; /* Tối ưu font stack */
  -webkit-font-smoothing: antialiased; /* Tối ưu font rendering */
  -moz-osx-font-smoothing: grayscale;
}

/* --- Navbar --- */
.navbar { 
  box-shadow: 0 2px 6px rgba(0,0,0,0.3); 
}

/* --- Cards - Tối ưu --- */
.card { 
  border: none; 
  border-radius: 15px; 
  box-shadow: 0 6px 15px rgba(0,0,0,0.3); 
  /* Bỏ hiệu ứng hover - giữ giao diện tĩnh */
}

/* --- Tables - Tối ưu --- */
.table-hover tbody tr { 
  /* transition: background-color 0.15s ease; */ /* Tắt animation để LED không nháy */
}

.table-hover tbody tr:hover { 
  background-color: #eaf4ff; 
}

.table th { 
  font-weight: 500; /* Font weight nhẹ hơn */
  border-bottom: 1px solid #dee2e6; /* Viền mỏng như cũ */
}

/* Bỏ dòng kẻ ngang giữa các hàng - Dùng !important để override Bootstrap */
.table td, .table th {
  border-top: none !important; /* Bỏ dòng kẻ trên */
  border-bottom: none !important; /* Bỏ dòng kẻ dưới */
}

.table tbody tr {
  border-bottom: none !important; /* Bỏ dòng kẻ dưới */
  border-top: none !important; /* Bỏ dòng kẻ trên */
}

/* Override Bootstrap table borders - CSS mạnh hơn */
.table.table-striped tbody tr {
  border: none !important;
}

.table.table-striped td, .table.table-striped th {
  border: none !important;
}

/* CSS cụ thể cho table trong container */
.table-container .table td, 
.table-container .table th {
  border-top: none !important;
  border-bottom: none !important;
}

.table-container .table tbody tr {
  border: none !important;
}

/* Force remove all table borders */
table.table td, table.table th {
  border: none !important;
}

/* --- Table Container với Scroll --- */
/* Container cho bảng với thanh cuộn khi cần */
.table-container {
  max-height: 600px; /* Chiều cao tối đa 600px */
  overflow-y: auto; /* Cuộn dọc khi cần */
  border: 1px solid #dee2e6; /* Viền cho container */
  border-radius: 8px; /* Bo góc */
}

/* Tối ưu scrollbar cho WebKit browsers */
.table-container::-webkit-scrollbar {
  width: 8px; /* Độ rộng scrollbar */
}

.table-container::-webkit-scrollbar-track {
  background: #f1f1f1; /* Màu nền track */
  border-radius: 4px; /* Bo góc track */
}

.table-container::-webkit-scrollbar-thumb {
  background: #c1c1c1; /* Màu thumb */
  border-radius: 4px; /* Bo góc thumb */
}

.table-container::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8; /* Màu thumb khi hover */
}

/* Đảm bảo bảng chiếm full width trong container */
.table-container .table {
  margin-bottom: 0; /* Bỏ margin bottom */
  border: none; /* Bỏ border của table */
}

/* Fix cho header khi scroll */
.table-container .table thead th {
  position: sticky; /* Header dính */
  top: 0; /* Dính ở top */
  background: #343a40; /* Màu nền header */
  z-index: 10; /* Layer cao */
  border-bottom: 1px solid #dee2e6; /* Viền mỏng như cũ */
  margin-right: 8px; /* Tạo khoảng cách cho scrollbar */
}

/* Tạo scrollbar chỉ cho tbody, không cho header */
.table-container {
  position: relative;
}

.table-container .table {
  display: block;
}

.table-container .table thead {
  display: block;
  width: 100%;
}

.table-container .table tbody {
  display: block;
  max-height: 560px; /* Chiều cao tbody = 600px - 40px header */
  overflow-y: auto;
  width: 100%;
}

.table-container .table tbody::-webkit-scrollbar {
  width: 8px;
}

.table-container .table tbody::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.table-container .table tbody::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

.table-container .table tbody::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* Đảm bảo các cột có cùng độ rộng giữa header và tbody */
.table-container .table thead tr,
.table-container .table tbody tr {
  display: table;
  width: 100%;
  table-layout: fixed;
}

.table-container .table thead tr th,
.table-container .table tbody tr td {
  display: table-cell;
}

/* --- Pagination --- */
.pagination .page-link { 
  border-radius: 8px !important; 
  margin: 0 2px; 
}

.pagination .page-item.active .page-link { 
  background: #3498db; 
  border-color: #3498db; 
}

.pagination-info { 
  background: #fff; 
  padding: 6px 10px; 
  border: 1px solid #dee2e6; 
  border-radius: 8px; 
}

/* --- Buttons - Tối ưu --- */
.btn { 
  padding: 6px 15px; 
  border-radius: 20px; 
  font-size: 14px; 
  font-weight: 600; 
  /* transition: all 0.2s ease; */ /* Tắt animation để LED không nháy */
  position: relative; /* Cho loading spinner */
}

/* Bỏ hiệu ứng hover cho buttons */
/* .btn:hover { 
  transform: translateY(-1px); 
  box-shadow: 0 4px 8px rgba(0,0,0,0.2); 
} */

.btn:active { 
  transform: translateY(0); /* Hiệu ứng click */
}

.inactive { 
  opacity: 0.45; 
  /* pointer-events: none; */ /* Bỏ comment để buttons có thể click được */
}

.btn.loading { 
  opacity: 0.7; 
  cursor: not-allowed; 
  pointer-events: none; /* Tắt interaction khi loading */
}

.btn.loading::after { 
  content: ""; 
  position: absolute; 
  width: 16px; 
  height: 16px; 
  border: 2px solid transparent; 
  border-top: 2px solid currentColor; 
  border-radius: 50%; 
  /* animation: spin 1s linear infinite; */ /* Tắt animation để LED không nháy */ 
  right: 8px; 
  top: 50%; 
  transform: translateY(-50%); 
}

@keyframes spin { 
  0% { transform: translateY(-50%) rotate(0deg); } 
  100% { transform: translateY(-50%) rotate(360deg); } 
}

/* --- Sort buttons --- */
.sort-btn {
  background: none; 
  color: #fff; 
  border: none; 
  cursor: pointer; 
  font-size: 20px; 
  margin-left: 4px;
  vertical-align: middle; 
  padding: 0;
}

.sort-btn:hover { 
  color: #ccc; 
}

/* --- Status badges --- */
.status-badge { 
  font-size: 12px; 
  padding: 4px 8px; 
  border-radius: 12px; 
}

.status-on { 
  background-color: #d4edda; 
  color: #155724; 
  border: 1px solid #c3e6cb; 
}

.status-off { 
  background-color: #f8d7da; 
  color: #721c24; 
  border: 1px solid #f5c6cb; 
}

.device-icon { 
  margin-right: 8px; 
}

/* --- Căn chỉnh độ rộng cột ID và các cột khác --- */
/* Cột ID nhỏ gọn, các cột khác rộng hơn */
.table thead th:first-child,
.table tbody td:first-child {
  width: 60px !important; /* Cột ID chỉ 60px */
  min-width: 60px !important;
  max-width: 60px !important;
  text-align: center !important; /* Căn giữa */
  font-weight: 600; /* Đậm hơn cho ID */
  vertical-align: middle !important; /* Căn giữa dọc */
  padding: 12px 8px !important; /* Padding đều */
}

/* Căn chỉnh tất cả các ô trong bảng */
.table thead th,
.table tbody td {
  vertical-align: middle !important; /* Căn giữa dọc tất cả các ô */
  padding: 12px 15px !important; /* Padding đều cho tất cả ô */
  font-size: 14px; /* Font size đồng nhất */
  line-height: 1.5; /* Line height thoáng hơn */
}

/* Header: Đậm và to hơn một chút */
.table thead th {
  font-weight: 600 !important;
  font-size: 15px !important;
  letter-spacing: 0.3px; /* Khoảng cách chữ */
  text-transform: none; /* Không viết hoa */
}

/* Body: Font weight bình thường */
.table tbody td {
  font-weight: 400;
  color: #212529; /* Màu đen đậm */
}

/* Cột số (nhiệt độ, độ ẩm, ánh sáng) căn giữa - cả header và body */
.table thead th:nth-child(2),
.table thead th:nth-child(3),
.table thead th:nth-child(4),
.table tbody td:nth-child(2),
.table tbody td:nth-child(3),
.table tbody td:nth-child(4) {
  text-align: center !important;
}

/* Body của cột số đậm hơn một chút */
.table tbody td:nth-child(2),
.table tbody td:nth-child(3),
.table tbody td:nth-child(4) {
  font-weight: 500; /* Đậm vừa cho số */
}

/* Cột thời gian (cột cuối) - căn giữa cả header và body */
.table thead th:last-child,
.table tbody td:last-child {
  width: 200px !important; /* Cột thời gian 200px */
  min-width: 200px !important;
  text-align: center !important; /* Căn giữa */
}

/* Hover effect cho row */
.table-hover tbody tr:hover td {
  background-color: #f8f9fa !important;
  transition: background-color 0.15s ease;
}

/* Zebra striping đẹp hơn */
.table-striped tbody tr:nth-of-type(odd) {
  background-color: rgba(0,0,0,0.02) !important;
}

.table-striped tbody tr:nth-of-type(even) {
  background-color: #ffffff !important;
}

/* --- Responsive --- */
@media (max-width: 576px) {
  .d-flex.gap-2 { 
    flex-direction: column; 
  }
  #keywordFilter { 
    width: 100% !important; 
  }
  
  /* Mobile: Cột ID nhỏ hơn nữa */
  .table thead th:first-child,
  .table tbody td:first-child {
    width: 45px !important;
    min-width: 45px !important;
    max-width: 45px !important;
    font-size: 12px; /* Font nhỏ hơn trên mobile */
  }
}
